<style>
	.exercise-header {
		color: black;
		font-size: 1.5em;
	}

	.exercise-sub-header {
		font-size: 0.75em;
		color: black;
	}

	.exercise-details {
		font-size: 1em;
		color: black;
	}

	body {
		background-color: #003259;
	}
</style>

<% if @exercise_group.blank? %>
	<div class="jumbotron" style="background: #101216">
		<h1 class="display-4">There are no Workouts for you!</h1>
		<p class="lead">Awesome job today. You have completed all the exercises for todays workout. Rest and let your body do what it was made to do....evolve!</p>
		<p><%= link_to "Sign Into Profile", profile_index_path %>
<% else %>
	<%= form_for :exercises, url: log_exercise_path do |f| %>
		<div style="margin-top:10px;margin-left: auto;margin-right: auto;width: 95%;">
			<div class="row">
			<div class="col-9">
				<%= f.submit "Next Exercise (#{@step_string})", class: "btn btn-lg btn-block", style: "background-color:#D9D278;" %>
			</div>
			<div class="col-3 text-center"><%= link_to "Exit Workout", profile_index_path(manual_exit: true), data: { confirm: 'Please make sure you complete the last exercise so your data will not be lost.' } %></div>
			</div>
		</div>
		<% @exercise_group.each_with_index do |exercise, idx| %>
			<% bg_color = Category.style_tags.to_a.sample[1] %>
			<% if idx.even? %>
				<div class="row">
			<% end %>
				<div class="col-md-6 col-12">
					<div class="row workout-background">
						<div class="col-6" style="<%= bg_color['style'] %>;padding-right:10px;border-radius: 5px;">
							<div class="row">
								<div class="col-md-12 text-center exercise-header">
									<%= exercise.name %>
								</div>
							</div>

							<div class="row">
								<div class="col-md-12 text-center exercise-sub-header">
									<i><%= exercise.description %></i>
								</div>
							</div>
							<div class="row">
								<div class="col-md-12 text-center exercise-sub-header">
									<%= exercise.example %>
								</div>
							</div>

							<div class="row">
								<div class="col-md-6 col-6 text-center" style="color:black;">
									Sets
								</div>
								<div class="col-md-6 col-6 text-center" style="color:black;">
								  Reps
								</div>
							</div>

							<div class="row">
								<div class="col-md-6 col-6 text-center exercise-details">
									<%= exercise.set_count %>
								</div>
								<div class="col-md-6 col-6 text-center exercise-details">
									<%= exercise.rep_range %>
								</div>
							</div>

							<% if exercise.warm_up %>
								<div class="row">
									<div class="col-md-6 col-6 text-center">
										Warm Up
									</div>
									<div class="col-md-6 col-6 text-center">
										Warm Up Details
									</div>
								</div>

								<div class="row">
									<div class="col-md-6 col-6 text-center exercise-details">
										<%= Exercise.to_word(exercise.warm_up) %>
									</div>
									<div class="col-md-6 col-6 text-center exercise-details">
										<%= exercise.warm_up_details %>
									</div>
								</div>
							<% end %>
						</div>

						<div class="col-6">
							<%= f.fields_for 'workout_detail[]', exercise.workout_details.new do |workout_detail| %>
								<%= workout_detail.hidden_field :exercise_id, value: "#{exercise.id}" %>
								<%= workout_detail.hidden_field :workout_group_id, value: "#{exercise.workout_group_id}" %>
								<%= workout_detail.hidden_field :workout_date, value: "#{DateTime.now.in_time_zone}" %>

								<div class="row" style="padding-right:10px;">
									<% @prev_exercise = @last_workout.where(exercise_id: exercise.id).last %>
									<% comment_placeholder = @prev_exercise&.comment.blank? ? "Enter exercise comment here..." : @prev_exercise&.comment %>
							  	<% col_space = 6 %>
							    <% 1.upto(exercise.set_count) do |num| %>
							  		<%# if @user.current_workout == @workout.id %>
							  			<% if @prev_exercise.nil? %>
							  				<div class="col-md-<%= col_space %> col-sm-<%= col_space %> col-<%= col_space %> rep" style="padding-top:10px;"><%= workout_detail.text_field "rep_#{num}_weight", size: 3, class: "rep_input form-control custom-input", type: 'number' %></div>
							  			<% else %>
							  				<div class="col-md-<%= col_space %> col-sm-<%= col_space %> col-<%= col_space %> rep" style="padding-top:10px;"><%= workout_detail.text_field "rep_#{num}_weight", size: 3, class: "rep_input form-control custom-input", placeholder: @prev_exercise["rep_#{num}_weight"], type: 'number' %></div>
							  			<% end %>
							  		<%# end %>
							    <% end %>
								</div>

								<div class="row" style="margin-left:1px;padding-right: 25px;">
									<%= workout_detail.text_area :comment, class: "col-md-12 form-control custom-input", placeholder: "#{comment_placeholder}" %>
								</div>
							<% end %>
						</div>
					</div>
				</div>
			<% if idx.odd? %>
				</div>
			<% end %>
		<% end %>
	<% end %>
<% end %>
