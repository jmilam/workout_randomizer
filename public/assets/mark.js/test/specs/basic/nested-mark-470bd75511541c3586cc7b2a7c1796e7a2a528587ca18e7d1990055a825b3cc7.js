"use strict";describe("basic mark in already marked element",function(){var e,t;beforeEach(function(n){loadFixtures("basic/nested-mark.html"),e=$(".basic-nested-mark"),(t=new Mark(e[0])).mark("lorem test ipsum",{diacritics:!1,separateWordSearch:!1,className:"root",done:function(){t.mark("test",{diacritics:!1,separateWordSearch:!1,className:"nested",done:n})}})}),it("should wrap matches even in already marked elements",function(){expect(e.find("mark")).toHaveLength(5),expect(e.find("mark.root")).toHaveLength(2),expect(e.find("mark.nested")).toHaveLength(3),expect(e.find("mark.root")).toContainElement("mark.nested"),expect(e.find("mark.root")).toContainText("lorem test ipsum"),expect(e.find("mark.nested")).toContainText("test")}),it("should unwrap nested mark elements correctly",function(n){t.unmark({className:"root",done:function(){expect(e.find("mark.root")).not.toExist(),expect(e.find("mark.nested")).toHaveLength(3),expect(e.find("mark.nested")).toContainText("test"),t.unmark({className:"nested",done:function(){expect(e.find("mark.nested")).not.toExist(),n()}})}})})});