"use strict";describe("mark with range",function(){function t(t,e){var a=t.text().indexOf(e),n=e.length;return a>-1?{start:a,length:n}:null}function e(t,e){$(t).attr("data-range-start",e.start),$(t).attr("data-range-length",e.length)}var a,n,r,g,s,o=["nonumy","nt ut labor","vero"];beforeEach(function(i){loadFixtures("ranges/main.html"),s=[],r=[],a=$(".ranges > div:nth-child(1)"),n=$(".ranges > div:nth-child(2)"),g=t(a,o[0]),r.push({start:g.start,length:g.length}),r.push(t(a,o[1])),g=t(a,o[2]),r.push({start:g.start+".674",length:g.length+.234}),new Mark(a[0]).markRanges(r,{each:e,done:function(){new Mark(n[0]).markRanges([{start:10,length:0},{start:20,length:0},{start:30,length:.6}],{noMatch:function(t){s=s.concat(t)},each:e,done:i})}})}),it("should mark correct range",function(){var e=a.find("mark:eq(0)"),n=t(a,o[0]);expect(e.text()).toBe(o[0]),expect(e.attr("data-range-start")).toBe(n.start.toString()),expect(e.attr("data-range-length")).toBe(n.length.toString()),expect(a.find("mark")).toHaveLength(4)}),it("should mark correct range including spaces and breaks",function(){var e=t(a,o[1]),n=a.find("mark[data-range-start='"+e.start+"']");expect(n.text()).toBe(o[1]),expect(n.attr("data-range-start")).toBe(e.start.toString()),expect(n.attr("data-range-length")).toBe(e.length.toString())}),it("should mark and parse integer ranges",function(){var e,n=t(a,o[2]);e=a.find("mark[data-range-start='"+n.start+"']"),expect(e.text()).toBe(o[2]),expect(e.attr("data-range-length")).toBe(n.length.toString())}),it("should ignore ranges with length of zero",function(){expect(JSON.stringify(s)).toBe(JSON.stringify([{start:10,length:0},{start:20,length:0},{start:30,length:.6}]))})});