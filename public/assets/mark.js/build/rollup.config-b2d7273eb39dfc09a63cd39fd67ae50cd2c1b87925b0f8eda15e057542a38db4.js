import pkg from"../package.json";import handlebars from"handlebars";import*as fs from"fs";import*as path from"path";import resolve from"rollup-plugin-node-resolve";import commonjs from"rollup-plugin-commonjs";import cleanup from"rollup-plugin-cleanup";import babel from"rollup-plugin-babel";import uglify from"rollup-plugin-uglify";import{minify}from"uglify-es";const output={name:(()=>{const e=pkg.name.split("/").pop().replace(".js","");return e.charAt(0).toUpperCase()+e.slice(1)})(),file:pkg.main,format:"umd",extend:!0,banner:handlebars.compile(fs.readFileSync(path.join(__dirname,"templates/copyright.hbs"),"utf8"))({name:pkg.name.split("/").pop(),version:`v${pkg.version}`,homepage:pkg.homepage,author:pkg.author.name,license:pkg.license,year:(()=>{const e=2014,u=(new Date).getFullYear();return u>e?`${e}\u2013${u}`:u})()})},outputJquery=Object.assign({},output,{file:(()=>{const e=pkg.main.split("/");return e[e.length-1]=`jquery.${e[e.length-1]}`,e.join("/")})(),globals:{jquery:"jQuery"}}),externalJquery=["jquery"],plugins=[resolve(),commonjs(),cleanup({comments:/^!/,maxEmptyLines:0})],pluginsES5=(()=>{const e=plugins.slice();return e.push(babel({exclude:"node_modules/**",presets:[["env",{modules:!1}]],plugins:["external-helpers","transform-object-assign"]})),e})(),minifyPlugins=(()=>{const e=plugins.slice();return e.push(uglify({warnings:!0,output:{comments:/^!/}},minify)),e})(),minifyPluginsES5=(()=>{const e=pluginsES5.slice();return e.push(uglify({warnings:!0,output:{comments:/^!/}},minify)),e})();export default[{input:"src/vanilla.js",output:Object.assign({},output,{file:output.file.replace(".js",".es6.js")}),plugins:plugins},{input:"src/jquery.js",output:Object.assign({},outputJquery,{file:outputJquery.file.replace(".js",".es6.js")}),plugins:plugins,external:externalJquery},{input:"src/vanilla.js",output:output,plugins:pluginsES5},{input:"src/jquery.js",output:outputJquery,plugins:pluginsES5,external:externalJquery},{input:"src/vanilla.js",output:Object.assign({},output,{file:output.file.replace(".js",".es6.min.js")}),plugins:minifyPlugins},{input:"src/jquery.js",output:Object.assign({},outputJquery,{file:outputJquery.file.replace(".js",".es6.min.js")}),plugins:minifyPlugins,external:externalJquery},{input:"src/vanilla.js",output:Object.assign({},output,{file:output.file.replace(".js",".min.js")}),plugins:minifyPluginsES5},{input:"src/jquery.js",output:Object.assign({},outputJquery,{file:outputJquery.file.replace(".js",".min.js")}),plugins:minifyPluginsES5,external:externalJquery}];