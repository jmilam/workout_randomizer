<div class="row" style="height:100%;">
	<div class="col-md-3" style="padding-top:20px;background:#003259;">
		<ul class="nav nav-pills" id="workoutTab" role="tablist">
		  <% @workout_groups.each_with_index do |group, idx| %>
		  	<% regex_group_name = group.name.scan(/\w+/).join('_') %>
		  	<% if idx == 0 %>
		  		 <li class='nav-item nav-li'><a class='nav-link active show' id='<%= regex_group_name %>-tab' data-toggle='tab' href='#<%= regex_group_name %>' role='tab' aria-controls='<%= regex_group_name %>' aira-selected='true'><%= group.name %></a></li>
		  	<% else %>
		  		<li class='nav-item nav-li'><a class='nav-link' id='<%= regex_group_name %>-tab' data-toggle='tab' href='#<%= regex_group_name %>' role='tab' aria-controls='<%= regex_group_name %>' aira-selected='true'><%= group.name %></a></li>
		  	<% end %>
		  <% end %>
		</ul>
	</div>
	<div class="col-md-9" style="padding-top:20px;">
		<div class="container-fluid">
			<div class="jumbotron boomslang-green">
				<div class="row">
					<div class="col-10 text-center">
					  <h3>
					  	<%= @workout.name %> Workout
					  </h3>
					  <% if @editable %>
					  	<span><%= link_to "Edit Workout", workout_path(@workout.id) %></span>
					  <% end %>
					</div>
					<% unless @user_already_liked %>
						<div class="col-1">
							<%= link_to like_workout_path(workout_id: @workout), method: :post do %>
						  	<%= image_tag "star", size: '30x30', title: 'Click to like this workout' %>
						  <% end %>
						</div>
					<% end %>
				</div>

				<div class="row">
			    <div class="col-md-9 col-sm-10 col-7">
			      <b><i>Workout Frequency:</i></b> <%= @workout.frequency %>
			    </div>
			    <div class="col-md-2 col-sm-2 col-5">
			      <%= link_to "Select Workout", accept_workout_path(workout_id: @workout.id), method: :patch, class: 'btn btn-sm bg-warning' %>
			    </div>
			  </div>

			  <div class="row">
			    <div class="col-md-12 col-sm-12">
			      <b><i>Workout Category:</i></b> <%= @workout.category.name %>
			    </div>
			  </div>

			  <div class="row">
			    <div class="col-md-12 col-sm-12">
			      <b><i>Workout Cycle Weeks:</i></b> <%= @workout.duration %>
			    </div>
			  </div>

			  <div class="row">
			    <div class="col-md-12 col-sm-12">
			      <b><i>Users currently using this workout:</i></b> <%= @workout_users.count %>
			    </div>
			  </div>

			  <% if @editable %>
				  <div class="row">
						<div class="col-md-12 col-sm-12">
							<%= link_to "Create New Daily Workout", new_workout_group_path(workout_id: @workout.id) %>
						</div>
					</div>
				<% end %>
			</div>

			<%= render "partials/alert" %>
			
			<div class="tab-content" id="workoutTabContent" style="padding-top:20px;">
			  <% @workout_groups.each_with_index do |group, idx| %>
			  	<% regex_group_name = group.name.scan(/\w+/).join('_') %>
					<% bg_color = Category.style_tags.to_a.sample[1]['border'] %>
				  	<div class="tab-pane fade active <%= idx == 0 ? 'show' : '' %>" id='<%= regex_group_name %>' role='tabpanel' aria-labelledby='<%= regex_group_name %>'>
							<ul class="nav nav-tabs" id="exerciseTab">
								<% group.exercises.each do |exercise, ex_idx| %>
									<li class='nav-item'><a class='nav-link' id='<%= exercise.name.gsub(" ", "").underscore %>-tab' data-toggle='tab' href='#<%= exercise.name.gsub(" ", "").underscore %>' role='tab' aria-controls='<%= exercise.name.gsub(" ", "").underscore %>' aira-selected='true'><%= exercise.name %></a>
									</li>
								<% end %>
								<% if @editable %>
									<li class='nav-item'><a class='nav-link' id='new_exercise-<%= group.name.gsub(" ", "").underscore %>-tab' data-toggle='tab' href='#new_exercise-<%= group.name.gsub(" ", "").underscore %>' role='tab' aria-controls='new_exercise-<%= group.name.gsub(" ", "").underscore %>' aira-selected='true'>New Exercise</a>
								<% end %>
							</ul>
							<div class="tab-content" id="exercise-tabContent-0">
								<% group.exercises.each do |exercise, ex_idx| %>
									<div class="tab-pane fade" id='<%= exercise.name.gsub(" ", "").underscore %>' role='tabpanel' aria-labelledby='<%= exercise.name.gsub(" ", "").underscore %>'>
	  								<%= render 'partials/exercise_entry_form', exercise: exercise, total_exercises: exercise.workout_group.exercises.count, request_type: :patch, workout_group: exercise.workout_group %>
									</div>
								<% end %>
								<div class="tab-pane fade" id='new_exercise-<%= group.name.gsub(" ", "").underscore %>' role='tabpanel' aria-labelledby='new_exercise-<%= group.name.gsub(" ", "").underscore %>'>
									<%= render 'partials/exercise_entry_form', exercise: Exercise.new, total_exercises: 0, request_type: :post, workout_group: group %>
								</div>
							</div>
						</div>
			  <% end %>
			</div>
		</div>
	</div>
</div>
