"use strict";describe("mark with range filter callback",function(){function e(e,t){var n=e.text().indexOf(t),r=t.length;return n>-1?{start:n,length:r}:null}var t,n,r,a,i,l,o,c=["ipsum","amet","elitr","tempor","nonumy"],f="elitr";beforeEach(function(h){loadFixtures("ranges/filter.html"),n=0,r=0,a=0,i=0,t=$(".ranges-filter"),l=[],o={},c.forEach(function(n,r){var a=e(t,n);a&&(o[n]={name:n,start:a.start,length:a.length,index:r},a.index=r,a.foo="bar"+r,l.push(a))}),new Mark(t[0]).markRanges(l,{filter:function(e,t,l,c){n++,3===e.nodeType&&r++;var h=o[l];return h&&h.index===t.index&&c===n-1&&(a++,h.start===t.start&&h.length===t.length&&t.foo==="bar"+h.index&&i++),l!==f},done:h})}),it("should call the filter callback for each range element",function(){var e=c.length;expect(n).toBe(e),expect(r).toBe(e),expect(a).toBe(e),expect(i).toBe(e),expect(t.find("mark")).toHaveLength(e-1),expect(t.find("mark:contains("+f+")")).toHaveLength(0)})});